FROM node:12

ARG DB_HOST
ARG DB_PORT
ARG DB_DATABASE
ARG DB_USERNAME
ARG DB_PASSWORD
ARG DB_SCHEMA

ENV DB_HOST ${DB_HOST}
ENV DB_PORT ${DB_PORT}
ENV DB_DATABASE ${DB_DATABASE}
ENV DB_USERNAME ${DB_USERNAME}
ENV DB_PASSWORD ${DB_PASSWORD}
ENV DB_SCHEMA ${DB_SCHEMA}

WORKDIR /usr/src/app

COPY src ./src
COPY package*.json ./
RUN npm install --only=production

ENTRYPOINT ["npm", "run"]
CMD ["serve"]

EXPOSE 4000
